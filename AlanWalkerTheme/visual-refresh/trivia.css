@supports (grid-template-columns:subgrid) and (white-space-collapse:collapse) {
  .visual-refresh .base_c48ade {
    display: grid;
    grid-template-areas: 
      "titleBar titleBar titleBar"
      "guildsList channelsList notice"
      "guildsList channelsList page";
  }
}
.visual-refresh {
  #app-mount .app__160d8 {
    --custom-guild-list-width: 72px;
    --guildbar-server-size: calc(var(--custom-guild-list-width) / 9 * 5);
    --guildbar-folder-size: calc(var(--guildbar-server-size) + calc(var(--guildbar-server-size) / 5));

    .chat_f75fb0 {
      border: 0;
    }
    .guilds_c48ade {
      height: calc(100% - var(--guild-margin-bottom) - 54px);
      margin-bottom: var(--guild-margin-bottom);
      margin-top: 54px;

      .tree_ef3116 {
        outline: unset;
      }
      .wrapper__6e9f8.selected__6e9f8 .childWrapper__6e9f8,
      .wrapper__6e9f8:hover .childWrapper__6e9f8 {
        background-color: transparent;
      }
      .childWrapper__6e9f8 > svg path {
        display: none;
      }
      .childWrapper__6e9f8 > svg {
        -webkit-mask: var(--home-button-background);
        -webkit-mask-size: var(--home-button-background-size);
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
        background-color: var(--back-home-button);
      }
      foreignObject {
        mask: unset;
      }
      .wrapper__6e9f8,
      .expandedFolderIconWrapper__48112 {
        border-radius: var(--border-radius-m);
        overflow: hidden;
      }
      .expandedFolderBackground__48112,
      .circleIconButton__5bc7e,
      .folderIconWrapper__48112 {
        border-radius: var(--border-radius-l);
        overflow: hidden;
      }
      .guildIcon__48112 {
        border-radius: var(--border-radius-l) !important;
      }
      .tutorialContainer__1f388 {
        position: fixed;
        top: 40px;
      }
      .stack_dbd263 {
        gap: calc(var(--custom-guild-list-width) / 9)  !important;
      }
      .scroller_ef3116 > .stack_dbd263 > .listItem__650eb,
      .tutorialContainer__650eb + .listItem__650eb,
      .tutorialContainer__1f388,
      .tutorialContainer__650eb,
      .folderGroup__48112 {
        .folderIconWrapper__48112,
        .folderPreviewWrapper__48112 {
          padding: calc(var(--guildbar-folder-size) / 12);
        }
        .stack_dbd263 {
          height: 100% !important;
        }
        .shiftSVG_cc5dd2 {
          top: 0;
          left: 0;
        }
        .pill_e5445c,
        .pill__1f388 {
          .item__58105:not([style*="height: 8px;"]) {
            height: 80% !important;
          }
        }
        .folderGroupBackground__48112 {
          left: calc(calc(var(--custom-guild-list-width) - var(--guildbar-folder-size)) / 2);
        }
        .folderGuildsList__48112>:first-child {
          margin-top: 0;
        }
        .folderPreview__48112 {
          gap: calc(var(--guildbar-folder-size) / 24);
        }
        .folderPreviewGuildIcon__48112 {
          width: calc(50% - calc(var(--guildbar-folder-size) / 48));
          height: calc(50% - calc(var(--guildbar-folder-size) / 48));
        }
        .circleIconButton__5bc7e,
        .wrapper__6e9f8,
        .folderPreview__48112,
        .folderIconWrapper__48112,
        .folderPreviewWrapper__48112,
        .folderButton__48112,
        .folderButtonInner__48112 {
          width: 100%;
          height: unset;
          aspect-ratio: 1/1;
        }
        .circleIcon__5bc7e {
          width: 50%;
          height: 50%;
        }
        .folderButtonContent__48112 {
          transform: translateY(-50%);
        }
        &.isExpanded__48112 .folderButtonContent__48112 {
          transform: translateY(0);
        }
        .svg_cc5dd2,
        .wrapper_cc5dd2 {
          width: var(--guildbar-folder-size) !important;
          height: var(--guildbar-folder-size) !important;
        }
      }
      .folderGroup__48112 .stack_dbd263 .listItem__650eb,
      .tutorialContainer__650eb,
      .tutorialContainer__650eb + .listItem__650eb,
      .scroller_ef3116 > .stack_dbd263 > .listItem__650eb {
        .svg_cc5dd2,
        .wrapper_cc5dd2 {
          width: var(--guildbar-server-size) !important;
          height: var(--guildbar-server-size) !important;
        }
        .childWrapper__6e9f8,
        .icon__6e9f8,
        .svg_cc5dd2 > foreignObject {
          width: 100%;
          height: 100%;
          x: calc(var(--guildbar-folder-size) / -10);
          y: calc(var(--guildbar-folder-size) / -10);
        }
        .childWrapper__6e9f8 {
          font-size: 120%;
          line-height: 100%;
        }
      }
    }
    @media (max-width: 800px) {
      .guilds_c48ade {
        height: calc(100% - var(--guild-margin-bottom) - 54px);
      }
      .wrapper_e131a9,
      .container__37e49 {
        width: var(--custom-guild-list-width) !important;

        &:hover {
          width: fit-content !important;
        }
        .avatarWrapper__37e49 {
          padding: 0 !important;
        }
      }
    }
    @media (max-width: 400px) {
      .guilds_c48ade {
        position: fixed;
        height: calc(100vh - var(--custom-app-panels-height, 0) - 32px) !important;
        top: 32px;
        margin-top: 0 !important;
        background-color: var(--back-sidebar) !important;
        z-index: 101;
        width: 0 !important;

        .tutorialContainer__1f388 {
          width: 53px;
          top: 36px !important;
          z-index: 101;

          .listItem__650eb {
            width: 53px;
          }
        }
      }
      .guilds_c48ade:has(~ .sidebarList_c48ade:hover),
      .guilds_c48ade:has(~ .sidebarList_c48ade .container__2637a:hover),
      .guilds_c48ade:has(~ .sidebarList_c48ade .privateChannels__35e86:hover),
      .guilds_c48ade:hover {
        width: var(--custom-guild-list-width) !important;

        .tutorialContainer__1f388 {
          position: relative;
          top: 4px !important;
        }
      }
      .container__2637a,
      .privateChannels__35e86 {
        left: var(--custom-guild-list-width);
        top: calc(32px + 48px) !important; /* title bar + chat header */
        height: calc(100% - 32px - 48px) !important;
        border-right: 0 !important;
      }
      .guilds_c48ade + .sidebarList_c48ade .container__2637a:hover,
      .guilds_c48ade + .sidebarList_c48ade .privateChannels__35e86:hover {
        width: calc(100% - var(--custom-guild-list-width));
      }
    }
    .sidebarList_c48ade {
      box-sizing: border-box;
      border: 0;
      border-right: 1px solid rgba(var(--border-color-1), var(--border-opacity-1));

      .scroller__99e7c {
        margin-bottom: 0;
      }
    }
    .sidebarResizeHandle_c48ade:active + .panels_c48ade,
    .sidebarResizeHandle_c48ade:hover + .panels_c48ade,
    .sidebarList_c48ade:hover ~ .panels_c48ade {
      width: calc(var(--custom-guild-sidebar-width) - var(--custom-guild-list-width)) !important;
    }
    .sidebar_c48ade.hidden_c48ade {
      display: none;
    }
    .sidebar_c48ade {
      display: grid;
      grid-template-areas: 
          "guildsList channelsList"
          "guildsList panels";
      grid-template-columns: auto 1fr;
      grid-template-rows: 1fr auto;
      width: fit-content !important;

      .sidebarList_c48ade {
        backdrop-filter: unset;
        border-radius: 0;
      
        .container__2637a {
          padding: 0;
        }
        .searchBar__35e86 {
          width: 100%;
          border-bottom: 1px solid rgba(var(--border-color-1), var(--border-opacity-1));
      
          button {
            min-width: unset;
            padding: 2px 10px;
          }
        }
      }
    }
    .container__133bf {
      border: 0;
    
      .container__9293f {
        border-bottom: 1px solid rgba(var(--border-color-1), var(--border-opacity-1));
      }
    }
    .wrapper_cb9592 {
      .callContainer_cb9592 {
        border-top: 0;
        border-radius: 0;
      }
    }
    .container__9293f,
    .subtitleContainer_f75fb0 {
      .children__9293f {
        .akaBadge__488b1,
        .nicknames__488b1,
        .defaultColor__4bd52 {
          color: var(--chat-header-name-color);
        }
      }
    }
  }
  @media (max-width: 800px) {
    #app-mount .app__160d8 {
      --custom-guild-list-width: 54px;
      --guild-margin-bottom: var(--custom-app-panels-height);
    }
  }
  .sidebar_c48ade:after {
    display: none;
  }
  @media (max-width: 400px) {
    .container__9293f {
      padding: 8px;
      padding-left: calc(8px + var(--custom-guild-list-width));
    }
    .subtitleContainer_f75fb0 {
      .toolbar__9293f {
        display: none;
      }
    }
  }
  /*Chat search bar*/
  .search__49676 {
    order: 1;
    margin: 0;
  
    .search__97492 {
      .searchBar__97492 {
        width: 27px;
        padding: 2px 0;
        transition: var(--animation-duration-2) all;
        background-color: transparent;
        border-radius: var(--border-radius-m);
        border: 1px solid transparent;
  
        .DraftEditor-root {
          padding: 0;
        }
      }
      .iconContainer_fea832 {
        transform: scale(1.2);
        transition: var(--animation-duration-2);
      }
      .searchBar__97492 {
        background: transparent;
      }
      .public-DraftEditorPlaceholder-root,
      .DraftEditor-root .public-DraftEditor-content {
        padding: 0;
      }
    }
    .open__97492,
    &:hover {
      .searchBar__97492 {
        width: 244px;
        padding: 2px 0 2px 8px;
        border-color: rgba(var(--border-color-1), var(--border-opacity-1));
      }
    }
    .open__97492 {
      .searchBar__97492 {
        background-color: var(--back-color-search-bar);
      }
    }
  }
  /*chat header*/
  .container__9293f {
    border-bottom: 1px solid rgba(var(--border-color-1), var(--border-opacity-1));
  }
  .titleWrapper__9293f {
    text-overflow: ellipsis;
    min-width: 0;
    overflow: hidden;
    white-space: no-wrap;
  }
  .children__9293f:after {
    display: none;
  }
  [aria-hidden="true"] {
    min-width: unset !important;
  }
  /* Chat sidebar (profile and search) */
  .user-profile-sidebar {
    .overlay_c0bea0 {
      background-color: transparent;
      border: 1px solid rgba(var(--border-color-1), var(--border-opacity-1));
      box-sizing: border-box;
    }
  }
  .searchHeader_f3b986,
  .searchResult__02a39,
  .searchResultsWrap_a9e706 {
    border-color: rgba(var(--border-color-1), var(--border-opacity-1));
  }
}